name: 'NPM Build and Deploy'
description: 'Build NPM projects and deploys them to Artifactory'

inputs:
  deployer:
    description: 'Build deployer'
    required: false
  resolver:
    description: 'Build resolver'
    required: false
  build_name:
    description: 'Build name'
    required: false
  build_number:
    description: 'Build number'
    required: false

runs:
  using: "composite"
  steps:
    - name: Set deployer
      run: |
        echo "Deployer - $DEPLOYER"
        echo "Resolver - $RESOLVER"
      shell: bash
      env:
        DEPLOYER: ${{ inputs.deployer }}
        RESOLVER: ${{ inputs.Resolver }}

    - name: Set GitHub Path
      run: echo "$GITHUB_ACTION_PATH" >> $GITHUB_PATH
      shell: bash
      env:
        GITHUB_ACTION_PATH: ${{ github.action_path }}

    - name: Build Pre Requisites
      run: build_pre_req.sh
      shell: bash

    - name: Configure NPM
      run: npm_builder.sh
      shell: bash